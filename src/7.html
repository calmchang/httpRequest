<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title></title>
    <meta id="viewport" name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1, maximum-scale=1,user-scalable=no">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="icon" href="./favicon.png" type="image/png">
    

    <link rel="stylesheet" href="printjson.css">
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="guide.css">
    <link rel="stylesheet" href="index.css">


    <script src="printjson.js"></script>
    <script src="qs.js"></script>
    <script src="guide.js"></script>
    <script src="index.js"></script>

    <style>
      .opacity{opacity: 0;pointer-events: none;}
    </style>
</head>

<body>

  
  <section class="info">
    <hgroup>
      <p>Request</p>
      <pre id="request">
      </pre>
    </hgroup>
    <hgroup>
      <p>Response</p>
      <pre id="response">
      </pre>
    </hgroup>
  </section>
  <hgroup>
    <p>URL</p>
    <p id="url"></p>
  </hgroup>
  <button id="btnRun">发送Post请求,Content-Type:text/xml</button>
  <script>

    function run(){
      let URL = `${window.HOST_API}/xml`;
      document.querySelector('#url').innerHTML = URL;

      var xhr = new XMLHttpRequest();
      xhr.onload = function () {
        let response= prettyPrintJson.toHtml(JSON.parse(xhr.response));
        document.querySelector('#response').innerHTML =response;
      }
      xhr.open('POST', URL)
      xhr.setRequestHeader("Content-Type", "text/xml");

      
      let xml=`<xml> 
  <ToUserName><![CDATA[gh_7f089789a]]></ToUserName>  
  <FromUserName><![CDATA[oia2TjuNoeX76QEjQNrcURxG8]]></FromUserName>  
  <CreateTime>1395620</CreateTime>  
  <MsgType><![CDATA[event]]></MsgType>  
  <Event><![CDATA[TEMPLATESENDJOBFINISH]]></Event>  
  <MsgID>200163836</MsgID>  
  <Status><![CDATA[success]]></Status> 
</xml>`
document.querySelector('#request').innerText =xml;
      xhr.send(xml);
    }

    window.addEventListener('load',()=>{
      document.querySelector('#btnRun').addEventListener('click',run);
    })

    
  </script>


</body>

</html>